# !!!!!!!! AUTO-GENERATED FILE, DO NOT MODIFY !!!!!!!!
# This file can be regenerated by the following command:
#   $ nix run .#gen-config

jobs:
  build-nixos-configuration:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Make more space
        run: 'echo "=== Before pruning ==="

          df -h

          sudo rm -rf /usr/share /usr/local /opt || true

          echo

          echo "=== After pruning ==="

          df -h

          '
      - name: Install Nix
        uses: cachix/install-nix-action@v19
        with:
          extra_nix_config: 'extra-substituters = https://staging.attic.rs/attic-ci

            extra-trusted-public-keys = attic-ci:U5Sey4mUxwBXM3iFapmP0/ogODXywKLRNgRPQpEXxbo=

            '
          github_access_token: ${{ secrets.GITHUB_TOKEN }}
      - env:
          ATTIC_CACHE: hello
          ATTIC_SERVER: https://attic.edgerunners.eu.org/
          ATTIC_TOKEN: ${{ secrets.ATTIC_HELLO_TOKEN }}
        name: Build and push with Attic
        run: 'nix develop .#ci --command \

          bb build-cache ${{ matrix.host }}

          '
    strategy:
      matrix:
        host:
          - dui
          - ge
          - lei
          - xun
          - zheng
name: Build
on:
  workflow_dispatch: {}
